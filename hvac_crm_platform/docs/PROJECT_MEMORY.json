{
  "projectMemory": {
    "lastUpdated": "2025-01-12",
    "source": "Balony directory integration",
    "entities": [
      {"type":"entity","name":"HVAC CRM Platform","entityType":"project","observations":["Enterprise-grade HVAC management platform for Warsaw-based companies","Built on React 18, TypeScript 5.7, Convex backend, Weaviate vector database","Designed to surpass Bitrix24 and Reynet CRM capabilities","Uses SHADCN v4 UI components with deep blue (#1A3E7C) nav, soft gray (#F5F7FA) bg, orange (#F2994A) accents","PWA-compatible for mobile technicians","Targets 99.99% uptime, <200ms response times, 500+ concurrent users","Comprehensive AI prophecy system for predictive maintenance and insights"]},
      {"type":"entity","name":"Technology Stack","entityType":"architecture","observations":["Frontend: React 18, TypeScript 5.7, Next.js, Tailwind CSS, SHADCN v4","Backend: Convex for real-time sync, Neondb for relational data, Drizzle ORM","AI/Vector: Weaviate for semantic search and prophecy system, Ollama for local AI","File Storage: Supabase for production, PocketBase for localhost development","Testing: Vitest, Playwright, Jest with 85%+ coverage target","Code Quality: Biomejs for linting, 100% TypeScript coverage requirement"]},
      {"type":"entity","name":"Warsaw Districts Optimization","entityType":"business_logic","observations":["Primary districts: Śródmieście, Wilanów, Mokotów, Żoliborz, Ursynów, Wola, Praga-Południe, Targówek","Affluence-based pricing with district multipliers","Route optimization for technician assignments","District-specific caching with TTL prioritization","Emergency alert system with district-based notifications","Performance weights: Śródmieście (1.5), Wilanów (1.4), Mokotów (1.3), others (1.0-1.2)"]},
      {"type":"entity","name":"AI Prophecy System","entityType":"ai_feature","observations":["Augment context engine acts as 'prophecy of data' predicting insights","Weaviate vector embeddings for semantic search of similar past services","AI-driven affluence analysis from customer transcriptions and data","Predictive maintenance suggestions based on equipment history","Hotspot prediction for service demand by district and season","Quote generation with AI-powered pricing optimization","Sentiment analysis from customer interactions and feedback"]},
      {"type":"entity","name":"PocketBase Integration Strategy","entityType":"development_approach","observations":["Localhost-first development with single binary setup (30 seconds vs 30 minutes)","Hybrid architecture: PocketBase (localhost) + Convex (production) + Weaviate (AI)","Real-time subscriptions for emergency alerts and technician tracking","File storage for equipment photos, invoices, and documents","SQLite backend for zero-config local development","Bidirectional sync with conflict resolution for offline-first mobile experience"]},
      {"type":"entity","name":"Exa and Tavily Integration","entityType":"search_intelligence","observations":["Exa for technical intelligence: equipment specs, competitor analysis, Warsaw district data","Tavily for market intelligence: HVAC trends, regulations, customer sentiment","Real-time competitive analysis against Bitrix24 and Reynet CRM","Equipment trend monitoring for Warsaw market","Regulatory updates for Polish HVAC standards","Social media sentiment analysis for customer insights","Market positioning and pricing intelligence for strategic decisions"]},
      {"type":"entity","name":"Enterprise Features Completed","entityType":"implementation_status","observations":["Real-time messaging system with threaded conversations and file attachments","Automated notification engine with multi-channel delivery (email/SMS/Telegram)","Client portal dashboard with service history and interactive booking","Workflow automation engine with custom rule builder","Invoice & inventory management with dynamic pricing","Advanced analytics dashboard with ROI metrics and predictive insights","Custom report builder with AI-powered suggestions and Warsaw-specific templates"]},
      {"type":"entity","name":"Supabase Production Integration","entityType":"production_infrastructure","observations":["File storage with AES-256 encryption and 7-year GDPR retention","Edge Functions with Deno runtime for AI processing","Real-time WebSocket channels for emergency alerts","Row Level Security (RLS) policies for data protection","Mobile camera upload with navigator.mediaDevices API","TensorFlow Lite integration for OCR processing","Presence tracking for technician availability","Automated backup and disaster recovery with Warsaw data locality"]},         {"type":"entity","name":"TypeScript Architecture","entityType":"code_quality","observations":["100% TypeScript coverage requirement across all modules","Strict mode enabled with comprehensive type checking","Convex action context patterns: ctx.runQuery/ctx.runMutation instead of ctx.db","Type-safe schema definitions with proper interface matching","Zod validation for runtime type checking","Proper error handling with ConvexError types","Import/export consistency across modules","Elimination of 'any' types and implicit type declarations"]},
      {"type":"entity","name":"Performance Optimization Targets","entityType":"performance_requirements","observations":["99.99% uptime with comprehensive monitoring","25% server cost reduction through optimization","<200ms response times for 500 concurrent users","Handle 1,000+ concurrent sessions","Core Web Vitals >90/100 score","TTL-based caching prioritizing high-affluence Warsaw districts","Materialized views for complex analytics queries","Background job processing for heavy operations","TTL-based district caching with priority weighting"]},
      {"type":"entity","name":"Security and Compliance","entityType":"compliance_requirements","observations":["WCAG 2.1 AA accessibility compliance (>95% score)","OWASP Top 10 security compliance","GDPR compliance with Warsaw data locality","Role-based access control (RBAC) implementation","Two-factor authentication via Supabase Auth","Data encryption at rest and in transit","Audit logging for all system operations","Regular security vulnerability scanning with Snyk"]},
      {"type":"entity","name":"Mobile and PWA Features","entityType":"mobile_experience","observations":["Progressive Web App (PWA) for offline functionality","Mobile-first responsive design with SHADCN components","Camera integration for equipment photo capture","GPS tracking for technician location services","Push notifications for emergency alerts","Offline data synchronization capabilities","Touch-optimized interface for field technicians","Voice notes recording and transcription"]},
      {"type":"entity","name":"Testing Strategy","entityType":"quality_assurance","observations":["Comprehensive testing with 85%+ coverage targeting 90%+","Unit tests with Vitest and Jest","End-to-end testing with Playwright and Cypress","Integration testing for Convex-Supabase hybrid architecture","Accessibility testing with axe-core","Load testing with Artillery for 500+ concurrent users","AI prophecy accuracy validation and monitoring","Real-time feature testing for WebSocket connections"]},
      {"type":"entity","name":"Development Workflow","entityType":"development_process","observations":["Local development using Convex CLI and PocketBase","Iterative development with Git version control","TypeScript best practices with strict compilation","Package managers for dependency management (no manual editing)","Desktop Commander tools for rapid prototyping","1-2 day cycles per feature implementation","Continuous integration with automated testing","Code review process with TypeScript validation"]},
{"type":"entity","name":"Competitive Analysis","entityType":"market_positioning","observations":["Target: Surpass Bitrix24 capabilities with HVAC-specific features","Competitive advantage: AI prophecy system for predictive insights","Warsaw-specific optimizations vs generic CRM solutions","Real-time features superior to traditional CRM platforms","Cost-effective localhost development vs cloud-only solutions","HVAC industry specialization vs general business CRM","Advanced analytics and BI beyond standard CRM offerings"]}
{"type":"entity","name":"Convex Backend Architecture","entityType":"backend_system","observations":["14 main backend files with comprehensive functionality","Real-time mutations and queries for all HVAC operations","Action-based external API integrations (AI, maps, notifications)","Internal functions for system operations and workflows","Schema-driven type safety with automatic generation","WebSocket-based real-time subscriptions","Authentication integration with @convex-dev/auth","Audit logging and performance monitoring built-in"]}
{"type":"entity","name":"SHADCN UI Component System","entityType":"frontend_framework","observations":["SHADCN v4 components with HVAC-specific customizations","Deep blue (#1A3E7C) navigation with orange (#F2994A) accents","Soft gray (#F5F7FA) backgrounds for optimal readability","Responsive design optimized for mobile technicians","Accessibility compliance with WCAG 2.1 AA standards","Custom composite components for HVAC workflows","Card, button, dialog, table, and chart components implemented"]}
{"type":"entity","name":"Warsaw HVAC Market Intelligence","entityType":"market_data","observations":["8 primary districts with affluence scoring and route optimization","Seasonal demand patterns for heating/cooling services","Equipment installation trends by property type and district","Pricing multipliers based on district affluence levels","Emergency service response time requirements by area","Technician availability and skill distribution across districts","Customer satisfaction metrics and sentiment analysis by location"]}
{"type":"entity","name":"File Management System","entityType":"file_handling","observations":["Equipment photo capture with mobile camera integration","OCR processing for Santander invoices and documentation","AI analysis of equipment images for maintenance predictions","Secure file storage with encryption and GDPR compliance","Multi-format support (images, PDFs, documents)","Version control and audit trails for all file operations","Automatic backup and disaster recovery procedures","Integration with accounting systems for invoice processing"]}
{"type":"entity","name":"Real-time Communication System","entityType":"communication","observations":["WebSocket-based messaging with threaded conversations","Multi-channel notifications (email, SMS, Telegram, push)","Emergency alert system with district-based targeting","Voice notes recording and transcription capabilities","File sharing within conversation threads","Presence tracking for technician availability","Offline message queuing and synchronization","Priority-based message routing and escalation"]}
{"type":"entity","name":"Route Optimization Engine","entityType":"logistics","observations":["AI-powered route planning for technician assignments","Real-time traffic and weather integration for Warsaw","District-based optimization with affluence prioritization","Emergency job insertion with route recalculation","Fuel cost optimization and carbon footprint tracking","Technician skill matching for job requirements","Time window constraints and customer preferences","Performance analytics and route efficiency monitoring"]}
{"type":"entity","name":"Analytics and BI Dashboard","entityType":"business_intelligence","observations":["Real-time KPI monitoring with customizable widgets","ROI tracking and profitability analysis by district","AI prophecy accuracy validation and improvement","Customer satisfaction trends and sentiment analysis","Technician performance metrics and productivity tracking","Equipment maintenance schedules and failure predictions","Revenue forecasting with seasonal adjustments","Competitive analysis and market positioning insights"]}
{"type":"entity","name":"Workflow Automation Engine","entityType":"automation","observations":["Custom rule builder for job and contact automation","Trigger-based actions with conditional logic","Auto-assignment of technicians based on skills and location","Automated invoice generation and payment processing","Maintenance schedule automation with customer notifications","Escalation workflows for urgent or overdue jobs","Integration with external systems (accounting, inventory)","Performance monitoring and optimization recommendations"]}
{"type":"entity","name":"Client Portal System","entityType":"customer_interface","observations":["Secure client access with token-based authentication","Service history and equipment maintenance records","Interactive booking calendar with real-time availability","Feedback forms with sentiment analysis integration","Document sharing and invoice access","Real-time job status updates and technician tracking","Emergency service request capabilities","Mobile-optimized interface for customer convenience"]}
{"type":"entity","name":"Inventory Management System","entityType":"inventory","observations":["Real-time stock tracking across Warsaw districts","Automated reorder points with supplier integration","Equipment lifecycle management and depreciation tracking","Barcode scanning and QR code generation","Supplier performance monitoring and cost optimization","Seasonal inventory planning with demand forecasting","Integration with job scheduling for parts availability","Waste tracking and environmental compliance reporting"]}
{"type":"entity","name":"HVAC CRM TypeScript Fixes","entityType":"development_milestone","observations":["Successfully fixed all TypeScript errors in users.ts and workflows.ts files","Applied 'niezwłocznie na maxa napraw' comprehensive fix approach","Fixed schema mismatches between expected and actual data structures","Added proper TypeScript types to eliminate implicit 'any' errors","Ensured 100% TypeScript coverage compliance for target files","users.ts: Added missing phone field to updateProfile mutation schema","workflows.ts: Fixed trigger condition types and action parameter validation"]}
{"type":"relation","from":"HVAC CRM Platform","to":"Technology Stack","relationType":"built_with"}
{"type":"relation","from":"HVAC CRM Platform","to":"Warsaw Districts Optimization","relationType":"optimized_for"}
{"type":"relation","from":"HVAC CRM Platform","to":"AI Prophecy System","relationType":"implements"}
{"type":"relation","from":"Technology Stack","to":"PocketBase Integration Strategy","relationType":"includes"}
{"type":"relation","from":"Technology Stack","to":"Supabase Production Integration","relationType":"uses_for_production"}
{"type":"relation","from":"AI Prophecy System","to":"Exa and Tavily Integration","relationType":"enhanced_by"}
{"type":"relation","from":"AI Prophecy System","to":"Warsaw Districts Optimization","relationType":"provides_insights_for"}
{"type":"relation","from":"PocketBase Integration Strategy","to":"Development Workflow","relationType":"enables"}
{"type":"relation","from":"Enterprise Features Completed","to":"HVAC CRM Platform","relationType":"part_of"}
{"type":"relation","from":"TypeScript Architecture","to":"Technology Stack","relationType":"enforces_quality_in"}
{"type":"relation","from":"Performance Optimization Targets","to":"HVAC CRM Platform","relationType":"defines_requirements_for"}
{"type":"relation","from":"Security and Compliance","to":"HVAC CRM Platform","relationType":"protects"}
{"type":"relation","from":"Mobile and PWA Features","to":"Technology Stack","relationType":"implemented_using"}
{"type":"relation","from":"Testing Strategy","to":"Development Workflow","relationType":"validates"}
{"type":"relation","from":"Competitive Analysis","to":"HVAC CRM Platform","relationType":"positions"}
{"type":"relation","from":"Exa and Tavily Integration","to":"Competitive Analysis","relationType":"supports"}
{"type":"relation","from":"Warsaw Districts Optimization","to":"Performance Optimization Targets","relationType":"influences"}
{"type":"relation","from":"Supabase Production Integration","to":"Security and Compliance","relationType":"implements"}
{"type":"relation","from":"PocketBase Integration Strategy","to":"TypeScript Architecture","relationType":"follows"}
{"type":"relation","from":"AI Prophecy System","to":"Performance Optimization Targets","relationType":"contributes_to"}
{"type":"relation","from":"HVAC CRM Platform","to":"Convex Backend Architecture","relationType":"powered_by"}
{"type":"relation","from":"HVAC CRM Platform","to":"SHADCN UI Component System","relationType":"uses_interface"}
{"type":"relation","from":"Technology Stack","to":"Convex Backend Architecture","relationType":"includes"}
{"type":"relation","from":"Technology Stack","to":"SHADCN UI Component System","relationType":"includes"}
{"type":"relation","from":"Warsaw Districts Optimization","to":"Warsaw HVAC Market Intelligence","relationType":"based_on"}
{"type":"relation","from":"AI Prophecy System","to":"Warsaw HVAC Market Intelligence","relationType":"analyzes"}
{"type":"relation","from":"File Management System","to":"PocketBase Integration Strategy","relationType":"implemented_in"}
{"type":"relation","from":"File Management System","to":"Supabase Production Integration","relationType":"scales_with"}
{"type":"relation","from":"Real-time Communication System","to":"Convex Backend Architecture","relationType":"built_on"}
{"type":"relation","from":"Route Optimization Engine","to":"Warsaw Districts Optimization","relationType":"optimizes"}
{"type":"relation","from":"Route Optimization Engine","to":"AI Prophecy System","relationType":"enhanced_by"}
{"type":"relation","from":"Analytics and BI Dashboard","to":"Enterprise Features Completed","relationType":"part_of"}
{"type":"relation","from":"Workflow Automation Engine","to":"Enterprise Features Completed","relationType":"part_of"}
{"type":"relation","from":"Client Portal System","to":"Enterprise Features Completed","relationType":"part_of"}
{"type":"relation","from":"Inventory Management System","to":"Enterprise Features Completed","relationType":"part_of"}
{"type":"relation","from":"Analytics and BI Dashboard","to":"Performance Optimization Targets","relationType":"monitors"}
{"type":"relation","from":"File Management System","to":"Security and Compliance","relationType":"complies_with"}
{"type":"relation","from":"Real-time Communication System","to":"Mobile and PWA Features","relationType":"enables"}
{"type":"relation","from":"Route Optimization Engine","to":"Performance Optimization Targets","relationType":"contributes_to"}
{"type":"relation","from":"Workflow Automation Engine","to":"AI Prophecy System","relationType":"triggered_by"}